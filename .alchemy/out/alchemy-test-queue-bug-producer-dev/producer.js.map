{
  "version": 3,
  "sources": ["../../../deployments/alchemy-worker/src/producer.ts"],
  "sourceRoot": ".alchemy/out/alchemy-test-queue-bug-producer-dev",
  "sourcesContent": ["import type { producer } from \"../../../alchemy.run\";\n\nexport default {\n\tasync fetch(request: Request, env: typeof producer.Env): Promise<Response> {\n\t\tconst url = new URL(request.url);\n\t\tconst message = url.searchParams.get(\"message\");\n\n\t\tconsole.log(\"[PRODUCER] Received request with message:\", message);\n\n\t\tif (!message) {\n\t\t\tconsole.log(\"[PRODUCER] No message provided in query params\");\n\t\t\treturn new Response(\"Error: message query parameter is required\", {\n\t\t\t\tstatus: 400,\n\t\t\t});\n\t\t}\n\n\t\ttry {\n\t\t\tconst taskId = crypto.randomUUID();\n\n\t\t\tconsole.log(\"[PRODUCER] Adding message to queue with taskId:\", taskId);\n\n\t\t\tawait env.TASK_QUEUE.send({\n\t\t\t\ttaskId,\n\t\t\t\tdata: message,\n\t\t\t});\n\n\t\t\tconsole.log(\"[PRODUCER] Successfully added message to queue\");\n\n\t\t\treturn new Response(\n\t\t\t\tJSON.stringify({\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\ttaskId,\n\t\t\t\t\tmessage: \"Message added to queue\",\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\theaders: { \"Content-Type\": \"application/json\" },\n\t\t\t\t},\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"[PRODUCER] Error adding message to queue:\", error);\n\t\t\treturn new Response(\"Error adding message to queue\", { status: 500 });\n\t\t}\n\t},\n};\n"],
  "mappings": ";AAEA,IAAO,mBAAQ;AAAA,EACd,MAAM,MAAM,SAAkB,KAA6C;AAC1E,UAAM,MAAM,IAAI,IAAI,QAAQ,GAAG;AAC/B,UAAM,UAAU,IAAI,aAAa,IAAI,SAAS;AAE9C,YAAQ,IAAI,6CAA6C,OAAO;AAEhE,QAAI,CAAC,SAAS;AACb,cAAQ,IAAI,gDAAgD;AAC5D,aAAO,IAAI,SAAS,8CAA8C;AAAA,QACjE,QAAQ;AAAA,MACT,CAAC;AAAA,IACF;AAEA,QAAI;AACH,YAAM,SAAS,OAAO,WAAW;AAEjC,cAAQ,IAAI,mDAAmD,MAAM;AAErE,YAAM,IAAI,WAAW,KAAK;AAAA,QACzB;AAAA,QACA,MAAM;AAAA,MACP,CAAC;AAED,cAAQ,IAAI,gDAAgD;AAE5D,aAAO,IAAI;AAAA,QACV,KAAK,UAAU;AAAA,UACd,SAAS;AAAA,UACT;AAAA,UACA,SAAS;AAAA,QACV,CAAC;AAAA,QACD;AAAA,UACC,SAAS,EAAE,gBAAgB,mBAAmB;AAAA,QAC/C;AAAA,MACD;AAAA,IACD,SAAS,OAAO;AACf,cAAQ,MAAM,6CAA6C,KAAK;AAChE,aAAO,IAAI,SAAS,iCAAiC,EAAE,QAAQ,IAAI,CAAC;AAAA,IACrE;AAAA,EACD;AACD;",
  "names": []
}
